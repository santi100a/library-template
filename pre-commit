#!/usr/bin/env bash

fail() {
    echo $0
    exit 1
}

echo "ğŸ“‹ Validating package.json..."
yarn validate-package-json 
if [ $? -ne 0 ]; then
    fail "âŒ Invalid package.json."
else
    echo "âœ… package.json is valid."
fi
echo "âœ¨ Running Prettier..."
yarn prettify
if [ $? -ne 0 ]; then
    fail "âŒ Prettier error."
else
    echo "âœ… Prettified successfully."
fi
echo "ğŸ“¦ Updating ESM wrapper..."
yarn esm-wrapper 
if [ $? -ne 0 ]; then
    fail "âŒ An error occured."
else
    echo "âœ… Wrapper updated successfully."
fi
echo "âœ…âœ… Checks completed."